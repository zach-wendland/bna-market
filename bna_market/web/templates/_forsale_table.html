{% if forsale and forsale|length > 0 %}
<table>
  <thead>
    <tr>
      <th scope="col">Address</th>
      <th scope="col">Price</th>
      <th scope="col">$/Sqft</th>
      <th scope="col">Beds</th>
      <th scope="col">Baths</th>
      <th scope="col">Sq Ft</th>
      <th scope="col">Type</th>
      <th scope="col">Days Listed</th>
      <th scope="col">View</th>
    </tr>
  </thead>
  <tbody>
    {% for row in forsale %}
      <tr>
        <td class="address-cell">{{ row.get('address', 'N/A') }}</td>
        <td class="price-cell">${{ "{:,.0f}".format(row.get('price', 0)) }}</td>
        <td class="price-sqft-cell">
          {% if row.get('price') and row.get('livingArea') and row.get('livingArea') > 0 %}
            ${{ "{:,.0f}".format(row.get('price') / row.get('livingArea')) }}
          {% else %}
            N/A
          {% endif %}
        </td>
        <td>{{ row.get('bedrooms', 'N/A') }}</td>
        <td>{{ row.get('bathrooms', 'N/A') }}</td>
        <td>{{ "{:,.0f}".format(row.get('livingArea', 0)) if row.get('livingArea') else 'N/A' }}</td>
        <td>{{ row.get('propertyType', 'N/A') }}</td>
        <td>{{ row.get('daysOnZillow', 'N/A') }}</td>
        <td>
          {% if row.get('detailUrl') %}
            <a href="{{ row.get('detailUrl') }}" target="_blank" rel="noopener" class="btn-link">Zillow</a>
          {% else %}
            -
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="empty-state">
  <div class="empty-icon">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
      <polyline points="9 22 9 12 15 12 15 22"></polyline>
    </svg>
  </div>
  <h3 class="empty-title">No For-Sale Listings Available</h3>
  <p class="empty-description">
    The database doesn't have any for-sale listings yet. Run the ETL pipeline to fetch current data from Zillow.
  </p>
  <code class="empty-command">python -m bna_market etl run</code>
</div>
{% endif %}
